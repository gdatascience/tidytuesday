us_wind <- tt$us_wind %>%
filter(xlong <= 0)
us_wind %>%
ggplot(aes(xlong, ylat)) +
geom_point() +
coord_fixed()
us_wind %>%
ggplot(aes(xlong, ylat)) +
geom_point() +
coord_map()
us_wind %>%
ggplot(aes(xlong, ylat)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map()
theme_set(theme_light())
tt_caption <- "Source: usgs.gov  |  Analysis: Tony Galvan (@GDataScience1)"
us_wind %>%
ggplot(aes(xlong, ylat)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_minimal() +
labs(title = "US Wind Turbine Data",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
caption = tt_caption)
us_wind %>%
ggplot(aes(t_cap)) +
geom_histogram()
us_wind <- tt$us_wind %>%
filter(xlong <= 0,
t_cap >= 0)
us_wind %>%
ggplot(aes(t_cap)) +
geom_histogram()
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap, size = t_cap)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)"
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.5, alpha = 0.25) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_fill_gradient2(low = "red", high = “blue”, mid = "white", midpoint = 25) +
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_fill_gradient2(low = "red", high = “blue”, mid = "white", midpoint = 25) +
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_fill_gradient2(low = "red", high = "blue", mid = "white", midpoint = 25) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 25) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 3000) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 1000) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.15) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_continuous() +
scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
RColorBrewer::display.brewer.all()
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_brewer(palette = "Blues") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Blues") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
RColorBrewer::display.brewer.all()
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "PuBu") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Purples") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = -t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Purples") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Purples") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Purples") +
theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Purples") +
#theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Reds") +
#theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_map() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Reds") +
#theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Reds") +
#theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~p_year) +
coord_map() +
theme_void() +
#scale_color_gradient2(low = "red", high = "blue", mid = "white", midpoint = 500) +
scale_color_distiller(palette = "Reds") +
#theme(legend.position = "bottom") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year * 10 %/% 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind <- tt$us_wind %>%
filter(xlong <= 0,
t_cap >= 0,
p_year > 0)
# Turbine capacity - Histogram
us_wind %>%
ggplot(aes(t_cap)) +
geom_histogram()
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
subtitle = "By Decade",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
subtitle = "By Decade",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
facet_wrap(~decade) +
coord_quickmap() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
subtitle = "By Decade",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
#facet_wrap(~decade) +
coord_quickmap() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
subtitle = "By Decade",
color = "Turbine capacity (kW)",
caption = tt_caption)
us_wind %>%
mutate(decade = p_year %/% 10 * 10) %>%
ggplot(aes(xlong, ylat, color = t_cap)) +
geom_point(size = 0.25, alpha = 0.25) +
#facet_wrap(~decade) +
coord_map() +
theme_void() +
scale_color_distiller(palette = "Reds") +
labs(title = "US Wind Turbine Data",
subtitle = "By Decade",
color = "Turbine capacity (kW)",
caption = tt_caption)
# This will save your most recent plot
ggsave(
filename = "2018_11_06_tidy_tuesday.png",
device = "png")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytuesdayR)
library(scales)
theme_set(theme_light())
tt_caption <- 'Blevins, Cameron; Helbock, Richard W., 2021, "US Post Offices",\n https://doi.org/10.7910/DVN/NUKCNA, Harvard Dataverse, V1, \nUNF:6:8ROmiI5/4qA8jHrt62PpyA== [fileUNF]'
tt <- tt_load("2021-04-13")
tt
tt %>%
map(glimpse)
post_offices <- tt$post_offices %>%
filter(!is.na(established),
established >= 1639,
is.na(discontinued) |
(discontinued >= established &
discontinued <= 2002)) %>%
mutate(longitude = ifelse(longitude > 0, -longitude, longitude),
state = ifelse(state == "VAy", "VA", state))
post_offices
post_offices %>%
count(id, sort = TRUE)
po_years <- post_offices %>%
select(name,
state,
established,
discontinued,
longitude,
latitude) %>%
replace_na(list(discontinued = 2003)) %>% # indicates PO is still active
mutate(active_year = map2(established, discontinued, seq)) %>%
unnest(active_year) %>%
mutate(age = active_year - established)
po_years
po_years %>%
count(active_year, name = "n_post_offices") %>%
ggplot(aes(active_year, n_post_offices)) +
geom_area()
library(ggthemes)
install.packages("ggthemes")
library(ggthemes)
library(viridis)
p <- po_years %>%
filter(!is.na(latitude),
!is.na(longitude),
active_year %in% c(1802, 1827, 1852, 1877,
1902, 1927, 1952, 1977, 2002),
!state %in% c("AK", "HI")) %>%
#filter(state == "CA") %>%
ggplot(aes(longitude, latitude, color = age)) +
borders("state") +
geom_point(size = 0.01, alpha = 0.25) +
scale_color_viridis() + # option = "magma") +
theme_map() +
coord_map()
p_facet <- p +
facet_wrap(~active_year) +
theme(legend.position = "right") +
labs(title = "How did US Post Offices spread, age, and close?",
subtitle = "1802 - 2002",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_facet
install.packages("gganimate")
post_offices %>%
select(name,
state,
established,
discontinued,
longitude,
latitude) %>%
replace_na(list(discontinued = 2003)) %>% # indicates PO is still active
mutate(active_year = map2(established, discontinued, seq))
p_facet <- p +
#facet_wrap(~active_year) +
theme(legend.position = "right") +
labs(title = "How did US Post Offices spread, age, and close?",
subtitle = "1802 - 2002",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_facet
p_facet <- p +
facet_wrap(~active_year) +
#theme(legend.position = "right") +
labs(title = "How did US Post Offices spread, age, and close?",
subtitle = "1802 - 2002",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_facet
p_facet <- p +
facet_wrap(~active_year) +
theme(legend.position = "right") +
labs(title = "How did US Post Offices spread, age, and close?",
subtitle = "1802 - 2002",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_facet
#install.packages("gifski")
library(gganimate)
p_anim <- p +
transition_manual(active_year) +
labs(title = "How did US Post Offices spread, age, close from 1802 - 2002?",
subtitle = "Each point represents an active office in { current_frame }; Older offices are lighter; Newer offices are darker",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_anim
install.packages("gifski")
p_anim <- p +
transition_manual(active_year) +
labs(title = "How did US Post Offices spread, age, close from 1802 - 2002?",
subtitle = "Each point represents an active office in { current_frame }; Older offices are lighter; Newer offices are darker",
color = "Age",
caption = paste0(tt_caption, "\nAnalysis: Tony Galvan (@GDataScience1)"))
p_anim
tidytuesdayR::use_tidytemplate()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytuesdayR)
tt <- tt_load("2021-11-09")
